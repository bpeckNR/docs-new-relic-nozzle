---
title: New Relic Nozzle for PCF
owner: Partners
---

<br/>
This documentation describes [New Relic Nozzle for Pivotal Cloud Foundry (PCF)](https://network.pivotal.io/products/nr-firehose-nozzle/). 

New Relic Nozzle for PCF collects metrics and events that are generated by all PCF components and applications that run on PCF Diego cells via the [Loggregator Firehose](https://docs.pivotal.io/pivotalcf/loggregator/index.html). It pushes this data to [New Relic](https://www.newrelic.com) to be ingested by New Relic Insights for dashboarding and visualization.

<br/>
<center>
    <img src="images/newrelic-nozzle-tile.png" alt="New Relic Nozzle Tile" height="150" width="150"/>
</center>


## <a id='overview'></a> Overview

Once you install New Relic Nozzle for PCF, it starts collecting and pushing Firehose events to New Relic Insights for visualization. New Relic organizes the Firehose data based on Firehose event types, and shows each Firehose event type in its own separate dashboard.

The nozzle can be installed as a tile in Ops Manager, or deployed using the CLI command **cf push** as a regular application. You can then monitor the health and performance of your PCF deployments, and set alerts based on any metrics that are collected from PCF Firehose.


## <a id='features'></a> Key Features

You can filter the nozzle dashboards that allow you to visualize the Firehose metrics and events.

You can monitor the health and performance of PCF components with the following categories:

  * PCF Domain
  * PCF Deployment
  * Firehose Event Type
  * Origin
  * Job
  * Component IP Address
  * Application Detail
  * Container

Select the item from a list of values for any of the above metrics and filter the dashboard based on the selected value. You can filter a dashboard by multiple metrics.


## <a id='filters'></a> Event Filtering

Due to a large number of events being streamed from the Firehose, in some cases you may want to set filtering to avoid ingestion of unwanted events in Insights. The nozzle allows you to filter out undesired events that are generated by the Firehose. In cases where there are events coming from a certain `deployment`, `origin`, or `job` that are not vital to watch in your environment, you can tell the nozzle to exclude them. The nozzle provides exclusions and inclusions mechanism which you can set at global and/or event type levels. Currently, only ValueMetric events can be filtered.

If you need any of the Firehose event types (`"ValueMetric"`, `"CounterEvent"`, `"ContainerMetric"`, `"HttpStartStop"`, `"LogMessage"`, `"Error"`) to be captured by the nozzle and pushed to New Relic Insights, you must specify them as a comma-separated list of event types in the `"Selected Events"` property in **New Relic Firehose Nozzle** tab of the tile configuration.

You can use `"Global Exclusions"` in **New Relic Firehose Nozzle Global Exclusion Filters** tab
to exclude a subset of the captured events based on the following event properties:

* Deployment name of events
* Job name of events
* Origin name of events

On top of the exclusions, you can still override them by specifying a subset of the excluded events
to be included for `"ValueMetric"` event types in **New Relic Firehose Nozzle ValueMetric Inclusion Filters**
tab based on the following event properties:

* Deployment name of ValueMetric events
* Job name of ValueMetric events
* Origin name of ValueMetric events
* Metric name in the ValueMetric events

### <a id='filter-examples'></a> Filter Examples

* If you exclude a particular `job` at the global level, but you include the same `job` at the `"ValueMetric"` level, it will be included in New Relic Insights.
* If you exclude a particular `job` at the global level, and include some `origin` at the `"ValueMetric"` level, as long as the `origin` matches the included origin, the event would be included, regardless of the `job` exclusion.

<p class='note'><strong>Note:</strong> When you run the nozzle as an application, you can use the above environment variables in the application manifest file.</p>


## <a id="snapshot"></a> Product Snapshot

The following table provides version and version-support information about New Relic Nozzle for PCF.

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
        <td>Tile version</td>
        <td>1.1.20</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>Aug 23, 2019</td>
    </tr>
    <tr>
        <td>Software component version</td>
        <td>New Relic Nozzle v1.1.20</td>
    </tr>
    <tr>
        <td>Compatible Ops Manager version(s)</td>
        <td>2.3.x, 2.4.x, 2.5.x, and 2.6.x</td>
    </tr>
    <tr>
        <td>Compatible Pivotal Application Service versions</td>
        <td>2.3.x, 2.4.x, 2.5.x, and 2.6.x</td>
    </tr>
    <tr>
        <td>BOSH stemcell version</td>
        <td>Ubuntu Xenial</td>
    </tr>
    <tr>
        <td>IaaS support</td>
        <td>AWS, GCP, Azure, and vSphere</td>
    </tr>
</table>

<p class="note warning"><strong> WARNING:</strong>
New Relic Nozzle for PCF v1.1.14
and earlier require a Ubuntu Trusty stemcell.
The end-of-life date for Ubuntu Trusty is April 2019.
If a security vulnerability is found on this stemcell after April, it will not be fixed.</p>


## <a id='compatibility'></a> Compatibility

This project has been tested and is compatible with PCF versions v2.3.x through v2.6.x.


## <a id="reqs"></a> Requirements

New Relic Nozzle for PCF has the following requirements:

* An active New Relic account with a Pro or Pro Trial license
* New Relic Insights included in the license


## <a id='trial'></a> Trial License

If you do not already have a New Relic account, you can obtain a [14-day free trial license](http://newrelic.com/signup?funnel=pivotal-cloud-foundry&partner=Pivotal+Cloud+Foundry).


## <a id="feedback"></a> Feedback

If you have a feature request, questions, or information about a bug, please submit an issue [on github](https://github.com/newrelic/newrelic-pcf-nozzle-tile/issues).
